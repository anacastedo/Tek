<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
    <title>Profile Comparison</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,200;0,400;0,500;0,700;0,800;1,100&display=swap" rel="stylesheet">
  </head>
  <body>
    <nav class="nav">
      <a class="nav-link" href="index.html">Home</a>
      <a class="nav-link" href="all.html">Database</a>
      <a class="nav-link active" aria-current="page" href="#">Compare</a>
    </nav>
    <h1>Profile Comparison</h1>
    <div class="search-area">
      <input type="text" name="" class="user_c" id="username1" placeholder="Enter Github Username1" autocomplete="off">
      <input type="text" name="" class="user_" id="username2" placeholder="Enter Github Username2" autocomplete="off">
      <button class="button" onclick="getDataToCompare();">Compare Both</button>
    </div>



<script>
  let log, i=0;
  getData();
  async function getData() {
    const response = await fetch('/api');
    const data = await response.json();

    const c_table = document.createElement('table');
    c_table.setAttribute("id","c_table");
    document.body.appendChild(c_table);


    for (item of data) {
      i++;
      const c_row=document.createElement('tr');
      c_row.setAttribute("id", `c_row_${i}`);
      c_row.className=`c_row`;
      document.getElementById("c_table").appendChild(c_row);
      const column1_c=document.createElement('td');
      column1_c.className=`column1`;
      const log_info_c = document.createTextNode(`Username: ${item.log}`);
      column1_c.appendChild(log_info_c);
      document.getElementById(`c_row_${i}`).appendChild(column1_c);
      const column2_c=document.createElement('td');
      column2_c.className=`column2`;
      const name_info_c = document.createTextNode(`Name: ${item.name}`);
      column2_c.appendChild(name_info_c);
      document.getElementById(`c_row_${i}`).appendChild(column2_c);
    //



      // root.className=`root`;
      // log_info.textContent = `${item.log}`;
      // log_info.style.cssText = `margin:1%; padding:1%; background-color:white`;
      // log_info.className=`log_info`
      // name.textContent = `${item.name}`;
      // name.style.cssText = `margin:1%; padding:1%; background-color:white`;
      // name.className=`name_info`;



      // root.append(table, row, column1, log_info, column2, name);
      // document.body.append(root);
    }
    console.log(data);
  };

  function getDataToCompare() {
    username1 = document.getElementById('username1').value;
    username2 = document.getElementById('username2').value;
  let usernames={username1, username2};
  console.log(usernames);
  console.log(JSON.stringify(usernames));
          options = {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(usernames)
          };

            fetch('/compare', options).then(response => response.json().then(data => {
              console.log("Success" + data);
            }));

        };



</script>


  </body>
</html>

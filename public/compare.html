<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
    <title>Profile Comparison</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100;0,200;0,400;0,500;0,700;0,800;1,100&display=swap" rel="stylesheet">
  </head>
  <body>
    <nav class="nav">
      <a class="nav-link" href="index.html">Home</a>
      <a class="nav-link" href="all.html">Database</a>
      <a class="nav-link active" aria-current="page" href="#">Compare</a>
    </nav>
    <div class="search-area">
      <input type="text" name="" class="user_c" id="username1" placeholder="Enter Github Username1" autocomplete="off">
      <input type="text" name="" class="user_" id="username2" placeholder="Enter Github Username2" autocomplete="off">
      <button class="button" onclick="retrieveUsers();">Compare Both</button>
    </div>
<script>
  let log;
  getData();
  async function getData() {
    const response = await fetch('/api');
    const data = await response.json();

    for (item of data) {
      const table = document.createElement('table');
      table.setAttribute("id","db_table");
      document.body.appendChild(table);
      const row=document.createElement('tr');
      row.setAttribute("id", "row");
      document.getElementById("db_table").appendChild(row);
      const column1=document.createElement("td");
      const log_info = document.createTextNode(`Username: ${item.log}`);
      column1.appendChild(log_info);
      document.getElementById("db_table").appendChild(column1);
      const column2=document.createElement("td");
      const name_info = document.createTextNode(`Name: ${item.name}`);
      column2.appendChild(name_info);
      document.getElementById("db_table").appendChild(column2);


      // root.className=`root`;
      // log_info.textContent = `${item.log}`;
      // log_info.style.cssText = `margin:1%; padding:1%; background-color:white`;
      // log_info.className=`log_info`
      // name.textContent = `${item.name}`;
      // name.style.cssText = `margin:1%; padding:1%; background-color:white`;
      // name.className=`name_info`;
       column1.className=`column1`;
       column2.className=`column2`;


      // root.append(table, row, column1, log_info, column2, name);
      // document.body.append(root);
    }
    console.log(data);
  };

  function getDataforCompare() {
    username1 = document.getElementById('username1').value;
    username2 = document.getElementById('username2').value;
  let usernames={username1, username2};
  console.log(usernames);
  console.log(JSON.stringify(usernames));
          options = {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(usernames)
          };

            fetch('/compare', options).then(response => response.json().then(data => {
              console.log("Success" + data);
            }));

        };



</script>


  </body>
</html>

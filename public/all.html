<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
  <meta charset="utf-8">
  <title>Database</title>
  <link rel="stylesheet" href="css/styles.css">
</head>

<body>
  <nav class="nav">
    <a class="nav-link" href="index.html">Home</a>
    <a class="nav-link active" aria-current="page" href="#">Up-to-date Database</a>
  </nav>
  <h1>Up-to-date Database Profiles</h1>
  <script>

    let log;
    getData();
    async function getData() {
      const response = await fetch('/api');
      const data = await response.json();

      for (item of data) {
        const root = document.createElement('div');
        const log_info = document.createElement('div');
        const created = document.createElement('div');

        log_info.textContent = `${item.log}`;
        log_info.style.cssText = `margin:1%; padding:1%; background-color:white`;

        root.append(log_info);
        document.body.append(root);
      }
      console.log(data);
    };

    async function removeUser(){
      log = document.getElementById('username').value;
      const dataToRemove = {
        log
      };
      const options = {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify(dataToRemove)
      };
        fetch('/api_remove', options);
        const root = document.createElement('div');
        const log_info = document.createElement('div');
        log_info.textContent = `Removido com êxito! Faça refresh da página.`;
        log_info.style.cssText = `margin:1%; padding:1%; background-color:gray`;
        root.append(log_info);
        document.body.append(root);
      };

        </script>
        <div class="search-area">
          <input type="text" name="" id="username" placeholder="Enter Github Username" autocomplete="off">
          <button class="button" onclick="removeUser();">Remove User</button>
        </div>

</body>

</html>
